<!doctype html>
<html class="theme-next use-motion">
<head>
  

<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>




  <link rel="stylesheet" type="text/css" href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5"/>


<link rel="stylesheet" type="text/css" href="/css/main.css?v=0.3.0"/>





    <meta name="keywords" content="Hexo,next" />





    <link rel="shorticon icon" type="image/x-icon" href="/favicon.ico?v=0.3.0" />




  <title> Hexo </title>
</head>

<body>
  <div class="container one-column 
   page-home 
">
    <div class="headband"></div>

    <div id="header" class="header">
      <div class="header-inner">
        <h1 class="site-meta">
    <a href="/" class="brand">
        <span class="logo">
          <i class="icon-logo"></i>
        </span>
        <span class="site-title">Hexo</span>
    </a>
</h1>


  <ul id="menu" class="menu">
    
      
      <li class="menu-item menu-item-home">
        <a href="/">
          <i class="menu-item-icon icon-home"></i> <br />
          首页
        </a>
      </li>
    
      
      <li class="menu-item menu-item-archives">
        <a href="/archives">
          <i class="menu-item-icon icon-archives"></i> <br />
          归档
        </a>
      </li>
    
      
      <li class="menu-item menu-item-tags">
        <a href="/tags">
          <i class="menu-item-icon icon-tags"></i> <br />
          标签
        </a>
      </li>
    
  </ul>


      </div>
    </div>

    <div id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content">
          
            
          

          <div id="posts" class="posts-expand">
            
  
    

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/2013/09/11/2013-09-11-ie6-3px-bug/">
                IE6下文本偏移3px的问题
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          
            发表于 2013-09-11
          
        </span>
        
          
        
      </div>
    </div>

    
      <div class="post-body">

        
        

        
          
            <h2 id="写在前面">写在前面</h2><p>当文本与浮动元素相邻（已知左侧元素左浮动）时，如何<strong>跨浏览器兼容（包括IE6等低版本IE浏览器）</strong>实现以下布局：<br><img src="/images/3px1.PNG" alt="参数为DOM对象时jQuery对象内部结构"><br>已知HTML结构如下所示：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">	&lt;body&gt;</span><br><span class="line">	    <span class="xml"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"left"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"right"</span>&gt;</span></span><br><span class="line">		    浮动元素后面的非浮动元素的显示问题：后面的元素认为浮动元素已脱离文档流；  其后面非浮动元素中的块级元素的背景和边框会被浮动元素盖住，但块级元素其中的文本不会被浮动元素盖住；其后面非浮动元素中的行级元素的背景、边框和内容都不会被浮动元但在IE6下很奇快，不会盖住块级元素，反而会盖住行级元素；且会产生3px边距。可通过zoom：1消除。若在浮动元素后面加上一个层,则此后的元素都按原来方式排列，不受影响；或者将紧随其后的第一个元素增加设置`”clear:both”`。</span><br><span class="line">		    浮动元素后面的非浮动元素的显示问题：后面的元素认为浮动元素已脱离文档流；  其后面非浮动元素中的块级元素的背景和边框会被浮动元素盖住，但块级元素其中的文本不会被浮动元素盖住；其后面非浮动元素中的行级元素的背景、边框和内容都不会被浮动元但在IE6下很奇快，不会盖住块级元素，反而会盖住行级元素；且会产生3px边距。可通过zoom：1消除。若在浮动元素后面加上一个层,则此后的元素都按原来方式排列，不受影响；或者将紧随其后的第一个元素增加设置`”clear:both”`。</span><br><span class="line">		    浮动元素后面的非浮动元素的显示问题：后面的元素认为浮动元素已脱离文档流；  其后面非浮动元素中的块级元素的背景和边框会被浮动元素盖住，但块级元素其中的文本不会被浮动元素盖住；其后面非浮动元素中的行级元素的背景、边框和内容都不会被浮动元但在IE6下很奇快，不会盖住块级元素，反而会盖住行级元素；且会产生3px边距。可通过zoom：1消除。若在浮动元素后面加上一个层,则此后的元素都按原来方式排列，不受影响；或者将紧随其后的第一个元素增加设置`”clear:both”`。</span><br><span class="line">		<span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line">```  </span><br><span class="line">## 实现步骤    </span><br><span class="line">### 初始效果：     </span><br><span class="line">```javascript  </span><br><span class="line">	<span class="tag">&lt;<span class="title">style</span> <span class="attribute">type</span>=<span class="value">"text/css"</span>&gt;</span><span class="css"></span><br><span class="line">          <span class="class">.left</span></span><br><span class="line">          <span class="rules">&#123;</span><br><span class="line">              <span class="rule"><span class="attribute">width</span>:<span class="value"><span class="number">100px</span></span></span>;</span><br><span class="line">              <span class="rule"><span class="attribute">height</span>:<span class="value"><span class="number">50px</span></span></span>;</span><br><span class="line">              <span class="rule"><span class="attribute">background-color</span>:<span class="value">Olive</span></span>;</span><br><span class="line"></span><br><span class="line">              <span class="rule"><span class="attribute">float</span>:<span class="value">left</span></span>;</span><br><span class="line">        </span><br><span class="line">              <span class="rule">&#125;</span></span></span><br><span class="line">         </span><br><span class="line">          <span class="class">.right</span></span><br><span class="line">          <span class="rules">&#123;</span><br><span class="line">              <span class="rule"><span class="attribute">border</span>:<span class="value"><span class="number">1px</span> black solid</span></span>;</span><br><span class="line">              <span class="rule"><span class="attribute">background-color</span>:<span class="value">Teal</span></span>;</span><br><span class="line">         </span><br><span class="line">              <span class="rule">&#125;</span></span></span><br><span class="line">    </span><span class="tag">&lt;/<span class="title">style</span>&gt;</span>    </span><br><span class="line">```      </span><br><span class="line">当.right宽度不确定时，在主流浏览器和IE6下，其效果不大相同，差距很难看出，如下图：  </span><br><span class="line">![参数为DOM对象时jQuery对象内部结构](/images/3px5.PNG)  </span><br><span class="line">### 情况一：.right元素宽度确定    </span><br><span class="line">**在IE6下给.right设定宽度后相当于使.right拥有layout属性**，而拥有布局的元素会清理浮动，因此设定.right宽度后在其他浏览器下效果不变如上图，但在IE6下有3px边距效果如下图：  </span><br><span class="line">![参数为DOM对象时jQuery对象内部结构](/images/3px3.PNG) </span><br><span class="line">      </span><br><span class="line">可以看到，在IE6下.left有3px的右外边距。  </span><br><span class="line">这时候想达到目标效果，有两种方法：  </span><br><span class="line"></span><br><span class="line">- 方法1，将.right也左浮动起来   </span><br><span class="line">这样会消除IE6的3px问题，也会使其他浏览器形成两列布局，最终代码： </span><br><span class="line">```javascript</span><br><span class="line">		<span class="tag">&lt;<span class="title">style</span> <span class="attribute">type</span>=<span class="value">"text/css"</span>&gt;</span><span class="css"></span><br><span class="line">	          <span class="class">.left</span></span><br><span class="line">	          <span class="rules">&#123;</span><br><span class="line">	              <span class="rule"><span class="attribute">width</span>:<span class="value"><span class="number">100px</span></span></span>;</span><br><span class="line">	              <span class="rule"><span class="attribute">height</span>:<span class="value"><span class="number">50px</span></span></span>;</span><br><span class="line">	              <span class="rule"><span class="attribute">background-color</span>:<span class="value">Olive</span></span>;</span><br><span class="line">	</span><br><span class="line">	              <span class="rule"><span class="attribute">float</span>:<span class="value">left</span></span>;</span><br><span class="line">	        </span><br><span class="line">	              <span class="rule">&#125;</span></span></span><br><span class="line">	         </span><br><span class="line">	          <span class="class">.right</span></span><br><span class="line">	          <span class="rules">&#123;</span><br><span class="line">	              <span class="rule"><span class="attribute">border</span>:<span class="value"><span class="number">1px</span> black solid</span></span>;</span><br><span class="line">	              <span class="rule"><span class="attribute">background-color</span>:<span class="value">Teal</span></span>;</span><br><span class="line">	</span><br><span class="line">	              <span class="rule"><span class="attribute">width</span>:<span class="value"><span class="number">500px</span></span></span>;</span><br><span class="line">	              <span class="rule"><span class="attribute">float</span>:<span class="value">left</span></span>;</span><br><span class="line">	         </span><br><span class="line">	              <span class="rule">&#125;</span></span></span><br><span class="line">	    </span><span class="tag">&lt;/<span class="title">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure></p>
<ul>
<li>方法2：给.right元素添加margin-left<br>对非IE6浏览器来讲，给.right设置<code>margin-left</code>值为.left的宽度；<br>在IE6来讲，给.left设置<code>margin-right</code>为-3px抵消。最终代码：  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;style type=<span class="string">"text/css"</span>&gt;</span><br><span class="line">        .left</span><br><span class="line">        &#123;</span><br><span class="line">            width:<span class="number">100</span>px;</span><br><span class="line">            height:<span class="number">50</span>px;</span><br><span class="line">            background-color:Olive;  </span><br><span class="line"></span><br><span class="line">            float:left;</span><br><span class="line">            *margin-right:-<span class="number">3</span>px;</span><br><span class="line">            &#125;</span><br><span class="line">       </span><br><span class="line">        .right</span><br><span class="line">        &#123;</span><br><span class="line">            border:<span class="number">1</span>px black solid;</span><br><span class="line">            background-color:Teal;</span><br><span class="line">              </span><br><span class="line">             width:<span class="number">500</span>px;</span><br><span class="line">             margin-left:<span class="number">100</span>px;</span><br><span class="line">             *margin-left:<span class="number">0</span>;</span><br><span class="line">            </span><br><span class="line">            &#125;</span><br><span class="line">  &lt;<span class="regexp">/style&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>将.right元素的<code>margin-left</code>设置为.left元素的宽度值。</p>
<h3 id="-right宽度不确定">.right宽度不确定</h3><p>此时可以设置.right的<code>margin-left</code>为.left的宽度，使.right不再环绕.left。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;style type=<span class="string">"text/css"</span>&gt;</span><br><span class="line">         div</span><br><span class="line">         &#123;</span><br><span class="line">             width:<span class="number">100</span>px;</span><br><span class="line">             height:<span class="number">50</span>px;</span><br><span class="line">             background-color:red;</span><br><span class="line">             float:left;</span><br><span class="line">             &#125;</span><br><span class="line">        </span><br><span class="line">         p</span><br><span class="line">         &#123;</span><br><span class="line">             border:<span class="number">1</span>px black solid;</span><br><span class="line">             background-color:pink;</span><br><span class="line"></span><br><span class="line">             margin-left:<span class="number">100</span>px;</span><br><span class="line">             &#125;</span><br><span class="line">   &lt;<span class="regexp">/style&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>此时非IE6的主流浏览器已达到目标效果；<br>但是在IE6下.right元素产生了3px边距，这次的3px边距效果如下图所示：<br><img src="/images/3px6.PNG" alt="参数为DOM对象时jQuery对象内部结构"><br>可以通过清理浮动将这个3px文本偏移解决，即给.right设置<code>height:1%</code>或<code>zoom:1</code>等，这些方法都是启动layout进行间接清除浮动，消除这个类型的3px，其效果为： </p>
<p><img src="/images/3px7.PNG" alt="参数为DOM对象时jQuery对象内部结构"><br>然后即可以通过上述讲的消除.left外部3px达到效果，最终代码：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;style type=<span class="string">"text/css"</span>&gt;</span><br><span class="line">        .left</span><br><span class="line">        &#123;</span><br><span class="line">            width:<span class="number">100</span>px;</span><br><span class="line">            height:<span class="number">50</span>px;</span><br><span class="line">            background-color:Olive;</span><br><span class="line">            float:left;</span><br><span class="line">            *margin-right:-<span class="number">3</span>px;</span><br><span class="line">            &#125;</span><br><span class="line">       </span><br><span class="line">        .right</span><br><span class="line">        &#123;</span><br><span class="line">            border:<span class="number">1</span>px black solid;</span><br><span class="line">            background-color:Teal;</span><br><span class="line">             </span><br><span class="line">            margin-left:<span class="number">100</span>px;</span><br><span class="line">            *height:<span class="number">1</span>%;</span><br><span class="line">            *margin-left:<span class="number">0</span>;</span><br><span class="line">            </span><br><span class="line">            &#125;</span><br><span class="line">  &lt;<span class="regexp">/style&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="总结">总结</h3><p>其实，总的说来，在IE6当右侧元素未清除浮动时，这个3px在内部；当右侧元素已清除浮动（不管以何种方式<code>zoom:1</code>、<code>height:1%</code>等），这个3px在外部。这两种3px都可以使用.left的<code>margin-right:-3px</code>消除，另外，外部3px浮动可以通过.right的<code>float:left</code>来消除。</p>

          
        
      </div>
    

    
      <div class="post-footer">
        
          <div class="post-tags">
            
              <a href="/tags/CSS/">
                #CSS
              </a>
            
          </div>
        

        

        
        
          <div class="post-eof"></div>
        
      </div>
    
  </div>


  
    

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/2013/09/11/2013-09-11-margin/">
                外边距问题
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          
            发表于 2013-09-11
          
        </span>
        
          
        
      </div>
    </div>

    
      <div class="post-body">

        
        

        
          
            <h2 id="理想和现实的差距">理想和现实的差距</h2><p>对于以下代码我们期望的和实际的呈现效果是有很大差距的：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;head&gt;</span><br><span class="line">   <span class="xml"><span class="tag">&lt;<span class="title">title</span>&gt;</span>Untitled Page<span class="tag">&lt;/<span class="title">title</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="title">style</span> <span class="attribute">type</span>=<span class="value">"text/css"</span>&gt;</span><span class="css"></span><br><span class="line">           <span class="tag">body</span><span class="rules">&#123;<span class="rule"><span class="attribute">width</span>:<span class="value"><span class="number">300px</span></span></span>;<span class="rule">&#125;</span></span></span><br><span class="line">          <span class="class">.top</span><span class="rules">&#123;<span class="rule"><span class="attribute">margin</span>:<span class="value"><span class="number">20px</span></span></span>;<span class="rule"><span class="attribute">background-color</span>:<span class="value"><span class="hexcolor">#ccc</span></span></span>;<span class="rule"><span class="attribute">border</span>:<span class="value">solid <span class="number">1px</span> <span class="hexcolor">#ccc</span></span></span>;<span class="rule">&#125;</span></span></span><br><span class="line">          <span class="tag">p</span><span class="rules">&#123;<span class="rule"><span class="attribute">margin</span>:<span class="value"><span class="number">10px</span></span></span>;<span class="rule"><span class="attribute">background-color</span>:<span class="value">red</span></span>;<span class="rule">&#125;</span></span></span><br><span class="line">          <span class="class">.bottom</span><span class="rules">&#123;<span class="rule"><span class="attribute">height</span>:<span class="value"><span class="number">20px</span></span></span>;<span class="rule"><span class="attribute">background-color</span>:<span class="value"><span class="hexcolor">#ccc</span></span></span>;<span class="rule"><span class="attribute">border</span>:<span class="value">solid <span class="number">1px</span> <span class="hexcolor">#ccc</span></span></span>;<span class="rule">&#125;</span></span></span><br><span class="line">   </span><span class="tag">&lt;/<span class="title">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"top"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">p</span>&gt;</span>content<span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"bottom"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span></span><br></pre></td></tr></table></figure></p>
<p>对于以上代码，理想如下图：<br><img src="/images/margin2.PNG" alt="参数为DOM对象时jQuery对象内部结构"><br>但现实是残酷的，实际现实如下图：<br><img src="/images/margin1.PNG" alt="参数为DOM对象时jQuery对象内部结构">    </p>
<h2 id="问题的分析与解决">问题的分析与解决</h2><h3 id="解释问题">解释问题</h3><p>从上面两个图我们可以看出对于垂直外边距的两个问题：  </p>
<ol>
<li>两个上下相邻的兄弟元素top和bottom，当它们的垂直外边距相遇时，会叠加成较大的一个值，而不是两者相加。  </li>
<li>对于两个为父子关系的块级元素，其垂直外边距也会叠加成较大的那个值，而且当父高度未设置时，其父高度=子高度+上内边距+下内边距+上边框+下边框。效果就是子的外边距被忽略了，而父的外边距的值=父子垂直边距叠加后的值。  <h3 id="解决问题">解决问题</h3></li>
<li>对于第一个问题，当我们需要使上下两元素间距为N时，只需设置上面元素的<code>margin-bottom</code>或下面元素的<code>margin-top</code>为N即可，避免同时设置两个 元素的上下边距  </li>
<li>对于第二个问题，给父元素添加一点内边距或者给父元素添加边框。  </li>
</ol>
<h3 id="修改后代码为：">修改后代码为：</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">//给父添加边框</span><br><span class="line">&lt;style type="text/css"&gt;</span><br><span class="line">           body&#123;width:300px;&#125;</span><br><span class="line">          .top&#123;margin:20px;background-color:#ccc;border:solid 1px #ccc;&#125;</span><br><span class="line">          p&#123;margin:10px;background-color:red;&#125;</span><br><span class="line">          .bottom&#123;height:20px;margin:20px;background-color:#ccc;border:solid 1px #ccc;&#125;</span><br><span class="line">   &lt;/style&gt;  </span><br><span class="line">//给父添加内边距</span><br><span class="line">&lt;style type="text/css"&gt;</span><br><span class="line">           body&#123;width:300px;&#125;</span><br><span class="line">          .top&#123;margin:20px;background-color:#ccc;padding:1px;&#125;</span><br><span class="line">          p&#123;margin:10px;background-color:red;&#125;</span><br><span class="line">          .bottom&#123;height:20px;margin:20px;background-color:#ccc;border:solid 1px #ccc;&#125;</span><br><span class="line">   &lt;/style&gt;</span><br></pre></td></tr></table></figure>
          
        
      </div>
    

    
      <div class="post-footer">
        
          <div class="post-tags">
            
              <a href="/tags/CSS/">
                #CSS
              </a>
            
          </div>
        

        

        
        
          <div class="post-eof"></div>
        
      </div>
    
  </div>


  
    

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/2013/09/06/2013-09-06-html-drag/">
                HTML5之拖拽
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          
            发表于 2013-09-06
          
        </span>
        
          
        
      </div>
    </div>

    
      <div class="post-body">

        
        

        
          
            <h2 id="直接上例子">直接上例子</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">&lt;head&gt;</span><br><span class="line">   <span class="xml"><span class="tag">&lt;<span class="title">title</span>&gt;</span>Untitled Page<span class="tag">&lt;/<span class="title">title</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span>&gt;</span><span class="javascript"></span><br><span class="line">       <span class="function"><span class="keyword">function</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">           <span class="keyword">var</span> image = <span class="built_in">document</span>.createElement(<span class="string">"img"</span>);</span><br><span class="line">           image.src = <span class="string">"images/audit_pub.png"</span>;</span><br><span class="line">		<span class="comment">//被拖拽的元素</span></span><br><span class="line">           <span class="keyword">var</span> source = <span class="built_in">document</span>.getElementById(<span class="string">"dragme"</span>);</span><br><span class="line">		<span class="comment">//目标元素，即被拖拽的元素可能经过的元素或将被拖拽的的元素放到该元素中</span></span><br><span class="line">           <span class="keyword">var</span> dest = <span class="built_in">document</span>.getElementById(<span class="string">"house"</span>);</span><br><span class="line">           <span class="keyword">var</span> talk = <span class="built_in">document</span>.getElementById(<span class="string">"talk"</span>);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//被拖拽元素开始拖拽的操作</span></span><br><span class="line">           source.addEventListener(<span class="string">"dragstart"</span>, <span class="function"><span class="keyword">function</span> <span class="params">(ev)</span> </span>&#123;</span><br><span class="line">               <span class="keyword">var</span> dt = ev.dataTransfer;</span><br><span class="line">			<span class="comment">//修改拖拽时的图标（测试时只有FF支持）</span></span><br><span class="line">               dt.setDragImage(image, -<span class="number">10</span>, -<span class="number">10</span>);</span><br><span class="line">			<span class="comment">//设置元素被拖拽时允许的视觉效果</span></span><br><span class="line">               dt.effectAllowed = <span class="string">"all"</span>;</span><br><span class="line">			<span class="comment">//存放元素被拖拽时要存放的数据</span></span><br><span class="line">               dt.setData(<span class="string">"text/plain"</span>, <span class="string">"珍爱生命，远离熊孩子！"</span>);</span><br><span class="line">           &#125;, <span class="literal">false</span>);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//被拖拽元素拖拽结束的操作</span></span><br><span class="line">           source.addEventListener(<span class="string">"dragend"</span>, <span class="function"><span class="keyword">function</span> <span class="params">(ev)</span> </span>&#123;</span><br><span class="line">               ev.preventDefault();</span><br><span class="line">               talk.innerHTML = <span class="string">""</span>;</span><br><span class="line">           &#125;, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		<span class="comment">//目标元素dest感受到有元素开始进入它的区域</span></span><br><span class="line">           dest.addEventListener(<span class="string">"dragenter"</span>, <span class="function"><span class="keyword">function</span> <span class="params">(ev)</span> </span>&#123;</span><br><span class="line">               talk.innerHTML = <span class="string">"砸开你家玻璃，溜进你家。"</span>;</span><br><span class="line">           &#125;, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//目标元素dest感受到有元素在它范围内移动</span></span><br><span class="line">           dest.addEventListener(<span class="string">"dragover"</span>, <span class="function"><span class="keyword">function</span> <span class="params">(ev)</span> </span>&#123;</span><br><span class="line">               <span class="keyword">this</span>.textContent = <span class="string">"熊孩子在我家里走来走去！"</span>;</span><br><span class="line">           &#125;, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//目标元素dest感受到有元素离开它的范围</span></span><br><span class="line">           dest.addEventListener(<span class="string">"dragleave"</span>, <span class="function"><span class="keyword">function</span> <span class="params">(ev)</span> </span>&#123;</span><br><span class="line">               talk.innerHTML = <span class="string">"玩够了，回家找妈妈去了！"</span>;</span><br><span class="line">               <span class="keyword">this</span>.textContent = <span class="string">"尼玛，熊孩子终于走了！"</span>;</span><br><span class="line">           &#125;, <span class="literal">false</span>);</span><br><span class="line">		<span class="comment">//目标元素dest感受到有元素被扔进它的范围</span></span><br><span class="line">           dest.addEventListener(<span class="string">"drop"</span>, <span class="function"><span class="keyword">function</span> <span class="params">(ev)</span> </span>&#123;</span><br><span class="line">               <span class="keyword">var</span> dt = ev.dataTransfer;</span><br><span class="line">               <span class="keyword">var</span> text = dt.getData(<span class="string">"text/plain"</span>);</span><br><span class="line">               dest.textContent = text;</span><br><span class="line">               ev.preventDefault();</span><br><span class="line">               ev.stopPropagation();</span><br><span class="line">           &#125;, <span class="literal">false</span>);</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="built_in">document</span>.ondragover = <span class="function"><span class="keyword">function</span> <span class="params">(e)</span> </span>&#123; e.preventDefault(); &#125;</span><br><span class="line">       <span class="built_in">document</span>.ondrop = <span class="function"><span class="keyword">function</span> <span class="params">(e)</span> </span>&#123; e.preventDefault(); &#125;</span><br><span class="line">   </span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">body</span> <span class="attribute">onload</span>=<span class="value">"init()"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">h1</span>&gt;</span>拖拽示例之熊孩子<span class="tag">&lt;/<span class="title">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"dragme"</span> <span class="attribute">draggable</span>=<span class="value">"true"</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="title">img</span> <span class="attribute">src</span>=<span class="value">"images/xhz.gif"</span> <span class="attribute">alt</span>=<span class="value">"熊孩子王尼玛"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="title">span</span>&gt;</span>熊孩子说：<span class="tag">&lt;/<span class="title">span</span>&gt;</span><span class="tag">&lt;<span class="title">span</span> <span class="attribute">id</span>=<span class="value">"talk"</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"house"</span> <span class="attribute">style</span>=<span class="value">"width:200px;height:200px;border:1px solid #ccc;"</span>&gt;</span>     </span><br><span class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h2 id="解释说明">解释说明</h2><p>对于上面代码，可以自己感受下，注意一定是高端浏览器~  </p>
<h3 id="与拖拽相关的事件的归属问题">与拖拽相关的事件的归属问题</h3><p>与拖拽相关的事件可分为两类：    </p>
<ul>
<li><code>dragstart、drag、dragend</code>这三个事件是针对被拖拽元素的  </li>
<li><code>dragenter、dragover、dragleave、drop</code>这三个事件时针对目标元素的  </li>
</ul>
<h3 id="阻止默认行为很关键">阻止默认行为很关键</h3><ul>
<li>在目标行为的<code>drop</code>事件处理程序中，阻止默认行为，（因为默认不接受被拖放的元素）  </li>
<li>对整个页面的<code>dragover、drop</code>事件，也要阻止默认行为，否则拖放处理不能够实现。  </li>
</ul>

          
        
      </div>
    

    
      <div class="post-footer">
        
          <div class="post-tags">
            
              <a href="/tags/HTML5/">
                #HTML5
              </a>
            
          </div>
        

        

        
        
          <div class="post-eof"></div>
        
      </div>
    
  </div>


  
    

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/2013/09/06/2013-09-16-layout-postion/">
                CSS布局之定位
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          
            发表于 2013-09-06
          
        </span>
        
          
        
      </div>
    </div>

    
      <div class="post-body">

        
        

        
          
            <h2 id="CSS中定位方案">CSS中定位方案</h2><p>有三种：标准流、浮动、绝对定位</p>
<h2 id="display">display</h2><p>块框（block box）、行内框（inline box）、行框（line box）<br>HTML中一切元素都会形成一个”框”(box)，块级元素即块框，行内元素即行内框。由一行形成的水平框即行框，行框可能包含多个行内框。行框的高度总是足以容纳它包含的所有的行内框，他们之间的关系如下图所示：<br><img src="../images/linebox.PNG" alt="参数为DOM对象时jQuery对象内部结构"></p>
<h3 id="块级元素、行内元素的区别">块级元素、行内元素的区别</h3><p>常见的<strong>块级元素：</strong><code>&lt;h1&gt;~&lt;h6&gt;、&lt;p&gt;、&lt;ol&gt;、&lt;ul&gt;、&lt;dl&gt;、&lt;dt&gt;、&lt;li&gt;、&lt;table&gt;、&lt;form&gt;、&lt;caption&gt;、&lt;div&gt;</code><br>常见的<strong>行内元素：</strong><code>&lt;span&gt;、&lt;img&gt;、&lt;input&gt;、&lt;em&gt;、&lt;srong&gt;</code>等</p>
<ul>
<li>块级元素：<br>  独占一行，默认情况下，宽度会占满父元素，多个块级框从上到下排列；垂直距离根据垂直外边距计算；<br>  可以设置<code>width、height</code>   </li>
<li>行内元素：<br>  不独占一行，多个块级框在一行中水平布置，可以通过内边距、外边距调整行内框之间距离；<br>  设置<code>width、height</code>无效；<br>  其<code>padding、margin</code>属性只在水平方向 有效，在垂直方向无效。</li>
</ul>
<h2 id="position">position</h2><ul>
<li>static：<br>元素仍然存在与标准流中。元素框正常生成。  </li>
<li>relative：<br>元素框在标准流中的占位保留；<br>元素的display属性不变；<br>元素的top、bottom、left、right、z-index属性被激活；<br>元素的top、bottom、left、right都是相对于自身在标准量中的占位而言；      </li>
<li>absolute：<br>元素框脱离标准文本流，不再占位；<br>元素的display属性被改变为<code>inline-block</code>，而不管之前该元素是块级元素还是行内元素<br>元素的top、bottom、left、right、z-index属性被激活；<br>元素的top、bottom、left、right都是相对于其设置了<code>postion:relative</code>或<code>position:absolute</code>的最近祖先元素而言；</li>
<li>fixed：<br>其表现与absolute相似，可以说是absolute的一种，区别就在于fixed的top、bottom、left、right定位是相对于视窗而言。<br>元素框脱离标准文本流，不再占位；<br>元素的display属性被改变为<code>inline-block</code>，而不管之前该元素是块级元素还是行内元素<br>元素的top、bottom、left、right、z-index属性被激活；    </li>
</ul>
<p><strong>特别注意：</strong> <strong>top的优先级高于bottom，left的优先级高于right</strong>；当设置矛盾时会优先top和left的设置，这个在<code>relative、absolute、fixed</code>下都是适用的，如下：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.relative&#123;top:<span class="number">10</span>px;</span><br><span class="line">		  bottom:<span class="number">10</span>px;</span><br><span class="line">		&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>z-index优先级：</strong>    </p>
<ul>
<li>不显示设置<code>z-index</code>时，<code>relative、absolute、fixed</code>优先级一样，后定义的元素出现在上层     </li>
<li>显示设置<code>z-index</code>时，该属性值大的在上层。<h2 id="display与position的关系">display与position的关系</h2>上面说过，<code>position:absolute\fixed</code>会将元素的display改变为<code>inline-block</code>，这时候如果显示设置<code>display</code>为其他值会失效。  </li>
</ul>
<p>同样，<code>float</code>也会将元素的display改变为<code>inline-block</code>，这时候如果显示设置<code>display</code>为其他值也会失效。  </p>
<h2 id="BFC和hasLayout和containing_block">BFC和hasLayout和containing block</h2><p>大多时候一个元素的<strong>尺寸</strong>和<strong>位置</strong>不是由自己决定的（例如：未设置宽、高尺寸的块级元素、绝对定位的元素等），而是要参考它的某个祖先容器。那详细的问题就来了：什么时候一个元素能够当家做主决定自己的尺寸和位置呢？当自己不能决定时要参考那个祖先元素呢？   </p>
<p>首先引入IE的布局概念，hasLayout（拥有布局）的元素能够负责自身的以及子元素的尺寸和位置设置。当一个元素没有布局不能决定自身尺寸和位置时，由离它最近的hasLayout（拥有布局）的元素来决定。举例说明吧：  </p>
<pre><code class="javascript">&lt;style type="text/css"&gt;
      .father
      {
          border:1px solid #ccc;
          float:left;
      }

&lt;/style&gt;    
&lt;body&gt;
    &lt;div class="test"&gt;
            局概念
    &lt;/div&gt;
&lt;/body&gt;
</code></pre>
<p>我们看到上面代码中的元素.test没有设置宽、高，它的尺寸由父body（在IE中body是默认hasLayout的元素之一）来决定，所以可以看到.father的宽度是与父等宽的，而不管其中元素是否撑满。    </p>
<p>然后给.father设置<code>float:left</code>，你会发现此时.father的宽度根据其内容进行调整，而不再是与其父元素等宽。这是由于<code>float：left</code>使.father拥有布局(hasLayout)。  </p>
<p>在上面那个例子已经谈到了hasLayout和containing block：  </p>
<h3 id="haslayout：一个元素如果hasLayout那么能够决定自己的尺寸和位置，对于没有布局的元素，可以通过一些CSS设置使其hasLayout：">haslayout：一个元素如果hasLayout那么能够决定自己的尺寸和位置，对于没有布局的元素，可以通过一些CSS设置使其hasLayout：</h3><ul>
<li>设置width  </li>
<li>设置height</li>
<li>使其浮动float</li>
<li>设置display为inline-block  </li>
<li>设置overflow为hidden、auto、scroll</li>
<li>设置zoom(仅IE)  </li>
</ul>
<h3 id="containing_block(包含块)">containing block(包含块)</h3><p>上面说到，当一个元素E无法决定自己的尺寸和定位，需要依靠其某一祖先元素来决定，这里提到的<code>某一个祖先元素</code>就是E的containing block(包含块)：  </p>
<ul>
<li>初始包含块：即浏览器窗口  </li>
<li>对于设置<code>position:fixed</code>的元素E，其位置需要依靠浏览器窗口决定个，因此E的包含块就是初始包含块  </li>
<li>对于设置<code>position:absolute</code>的元素E，其包含块就是’离E最近的设置了<code>position:relative\absolute</code>的祖先元素’   </li>
</ul>
<h3 id="BFC">BFC</h3><p>我觉得BFC在主流浏览器中的角色类似于hasLayout在IE中的功能。</p>

          
        
      </div>
    

    
      <div class="post-footer">
        
          <div class="post-tags">
            
              <a href="/tags/CSS/">
                #CSS
              </a>
            
          </div>
        

        

        
        
          <div class="post-eof"></div>
        
      </div>
    
  </div>


  
    

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/2013/09/05/2013-09-05-html5-file/">
                HTML5之文件
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          
            发表于 2013-09-05
          
        </span>
        
          
        
      </div>
    </div>

    
      <div class="post-body">

        
        

        
          
            <h2 id="写在前面">写在前面</h2><p>项目中有个批量上传照片的需求，我们都知道在xhtml和html4中一个文件上传框只能上传一个文件，我当时使用的是<code>swfupload.js</code>相当方便快捷，且实现了类型筛选、文件大小限制、进度控制、撤销上传等功能，感觉相当不错，推荐给大家。当然了html5让一个文件框可同时上传多个文件，这当然是极好的~</p>
<h2 id="一次上传多个文件">一次上传多个文件</h2><h3 id="multiple属性"><code>multiple</code>属性</h3><p>html5对<code>&lt;input type=&quot;file&quot;&gt;</code>新增了<code>multiple</code>属性。设置了该属性后，一个file框可以同时上传多个文件（在选择文件时ctrl键可用了）。    </p>
<h3 id="file对象"><code>file</code>对象</h3><p>每一个文件都对应一个<code>file</code>对象，文件选择框对应一个<code>files</code>属性，该属性值是一个<code>FileList</code>对象，包含所有的<code>file</code>对象。    </p>
<h3 id="name和lastModifiedDate属性"><code>name</code>和<code>lastModifiedDate</code>属性</h3><p>每一个<code>file</code>对象包含两个属性<code>name</code>和<code>lastModifiedDate</code>。<br><code>name</code>即文件名，不包含路径。  </p>
<p>示例：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type="text/javascript"&gt;</span><br><span class="line">       function check() &#123;</span><br><span class="line">           var files = document.getElementById("test").files;</span><br><span class="line">           for (var i = 0, len = files.length; i &lt; len; i++) &#123;</span><br><span class="line">               alert(files[i].name);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;form onsubmit=""&gt;</span><br><span class="line">		&lt;input type="file" id="test" multiple size="100" /&gt;</span><br><span class="line">        &lt;input type="button" onclick="check();"/&gt;</span><br><span class="line">	&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="获取文件大小（size）和类型（type）">获取文件大小（size）和类型（type）</h3><p>上面提到的<code>file</code>对象还有两个属性<code>type</code>和<code>size</code>，这两个属性是继承自Blob对象的。  </p>
<ul>
<li><code>type</code>表示文件的<code>MIME</code>类型  </li>
<li><code>size</code>表示文件的字节长度  </li>
</ul>
<p>示例：  </p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">	&lt;script type="text/javascript"&gt;</span><br><span class="line">        function check() &#123;</span><br><span class="line">            var files = document.getElementById("test").files;</span><br><span class="line">            for (var i = 0, len = files.length; i &lt; len; i++) &#123;</span><br><span class="line">                alert(files[i].type);  </span><br><span class="line">				alert(files[i].size);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">	&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">	&lt;body&gt;</span><br><span class="line">	    &lt;form onsubmit=""&gt;</span><br><span class="line">			&lt;input type="file" id="test" multiple size="100" /&gt;</span><br><span class="line">	        &lt;input type="button" onclick="check();"/&gt;</span><br><span class="line">		&lt;/form&gt;</span><br><span class="line">	&lt;/body&gt;    </span><br><span class="line">```  </span><br><span class="line">### 自动筛选特定类型的文件`accept`属性  </span><br><span class="line"></span><br><span class="line">### 给个例子随便感受下：  </span><br><span class="line">```javascript</span><br><span class="line">	&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Untitled Page&lt;/title&gt;</span><br><span class="line">    &lt;script type="text/javascript"&gt;</span><br><span class="line">        function check() &#123;</span><br><span class="line">            var files = document.getElementById("test").files;</span><br><span class="line">            document.getElementById("num").innerHTML = files.length;</span><br><span class="line">                document.getElementById("info_type").innerHTML = files[0].type;</span><br><span class="line">                document.getElementById("info_size").innerHTML = files[0].size;</span><br><span class="line">                document.getElementById("info_name").innerHTML = files[0].name;</span><br><span class="line">        &#125;</span><br><span class="line">	&lt;/script&gt;</span><br><span class="line">	&lt;/head&gt;</span><br><span class="line">	&lt;body&gt;</span><br><span class="line">	&lt;div  style="width:500px; border:1px solid #ccc;padding:10px;"&gt;</span><br><span class="line">	    &lt;form onsubmit=""&gt;</span><br><span class="line">			&lt;input type="file" id="test" multiple size="100" accept="image/*"/&gt;</span><br><span class="line">	        &lt;input type="button" onclick="check();" value="来感受下"/&gt;</span><br><span class="line">		&lt;/form&gt;</span><br><span class="line">		&lt;hr/&gt;</span><br><span class="line">	    &lt;p&gt;文件个数：&lt;span id="num"&gt;&lt;/span&gt;&lt;/p&gt;</span><br><span class="line">	    &lt;p&gt;第一个文件类型：&lt;span id="info_type"&gt;&lt;/span&gt;&lt;/p&gt;</span><br><span class="line">	    &lt;p&gt;第一个文件字节长度：&lt;span  id="info_size"&gt;&lt;/span&gt;&lt;/p&gt;</span><br><span class="line">	    &lt;p&gt;第一个文件名：&lt;span  id="info_name"&gt;&lt;/span&gt;&lt;/p&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;/body&gt;</span><br></pre></td></tr></table></figure>
<h2 id="在前端读取文件内容">在前端读取文件内容</h2><p>HTML5增加了浏览器读取文件内容的功能，通过FileReader对象实现的。读取的结果存放在其<code>result</code>属性中，读取方式有三种：  </p>
<ul>
<li>将文件读取为二进制<code>readAsBinaryString(file)</code>  </li>
<li>将文件读取为文本<code>readAsText(file,encoding)</code>，第二个参数为编码方式，默认为<code>utf-8</code>，若含有中文内容可将该参数设置为<code>GBK</code>  </li>
</ul>
<p>示例：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type="text/javascript"&gt;</span><br><span class="line">       function readText() &#123;</span><br><span class="line">           var files = document.getElementById("test").files;</span><br><span class="line">           var file = files[0];</span><br><span class="line">           var reader = new FileReader();</span><br><span class="line">           reader.readAsText(file,"GBK");</span><br><span class="line">           reader.onload = function () &#123;</span><br><span class="line">               document.getElementById("num").innerHTML = this.result;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       function readBS() &#123;</span><br><span class="line">           var files = document.getElementById("test").files;</span><br><span class="line">           var file = files[0];</span><br><span class="line">           var reader = new FileReader();</span><br><span class="line">           reader.readAsBinaryString(file, "GBK");</span><br><span class="line">           reader.onload = function () &#123;</span><br><span class="line">               document.getElementById("num").innerHTML = this.result;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;div  style="width:500px; border:1px solid #ccc;padding:10px;"&gt;</span><br><span class="line">    &lt;form onsubmit=""&gt;</span><br><span class="line">		&lt;input type="file" id="test" multiple size="100"/&gt;</span><br><span class="line">        &lt;input type="button" onclick="readText();" value="以文本输出内容"/&gt;</span><br><span class="line">        &lt;input type="button" onclick="readBS();" value="以二进制输出内容"/&gt;</span><br><span class="line">	&lt;/form&gt;&lt;hr/&gt;</span><br><span class="line">    &lt;p&gt;文件内容：&lt;span id="num"&gt;&lt;/span&gt;&lt;/p&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure></p>

          
        
      </div>
    

    
      <div class="post-footer">
        
          <div class="post-tags">
            
              <a href="/tags/HTML5/">
                #HTML5
              </a>
            
          </div>
        

        

        
        
          <div class="post-eof"></div>
        
      </div>
    
  </div>


  
    

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/2013/09/01/2013-09-01-browser-kernel/">
                浏览器内核简介
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          
            发表于 2013-09-01
          
        </span>
        
          
        
      </div>
    </div>

    
      <div class="post-body">

        
        

        
          
            <h2 id="主流浏览器内核">主流浏览器内核</h2><p>浏览器内核又叫渲染引擎、解释引擎、排版引擎等。浏览器内核就是来渲染网页内容的，将页面代码转化为最终看到的页面。浏览器之间之所以存在不兼容的问题就算因为他们的渲染引擎不同。  </p>
<h3 id="1-_Trident内核">1. Trident内核</h3><p>即IE浏览器使用的内核，就是通常所说的IE内核。360浏览器、百度浏览器、搜狗浏览器的新版本都是采用”双核”或”多核”，其中兼容模式使用的即Trident内核，而高速模式使用的大多是Webkit内核。  </p>
<h3 id="2-_Gecko内核">2. Gecko内核</h3><p>目前最主流的Gecko浏览器是FireFox。  </p>
<h3 id="3-_KHTML">3. KHTML</h3><p>Konqueror是一款基于KHTML引擎的浏览器，只能在Linux中使用。</p>
<h3 id="4-_Webkit内核">4. Webkit内核</h3><p>由KHTML内核发展而来，对W3C标准支持的很完善。常见的Webkit浏览器有Chrome、Safari、Android手机浏览器等。  </p>
<h3 id="5-_Presto内核">5. Presto内核</h3><p>是Opera7.0及以后版本使用的内核，Opera之前的版本使用的内核是Elekra。<br>在Opera8及以前版本，其用户代理字符串时最符合规定的，使用产品名和版本号标识自身；在Opera8以后的版本中开始修改用户代理字符串：要么把自己标识成IE和Firefox，要么完全隐藏自身装扮成IE和Firefox。  </p>
<p>进行搜索引擎检测时，要<strong>注意检测顺序</strong>。Opera总是伪装成其他浏览器，所以先检测Opera；Webkit引擎的用户代理字符串包含”Gecko”和”KHTML”，所以要先检测Webkit，后检测Gecko和KHTML；KHTML用户代理字符串中有Gecko字符串，所以先检测KHTML后检测Gecko；最后检测IE。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//检测搜索引擎</span></span><br><span class="line">   <span class="keyword">var</span> client = <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> engine = &#123;</span><br><span class="line">          ie: <span class="number">0</span>,</span><br><span class="line">          gecko: <span class="number">0</span>,</span><br><span class="line">          khtml: <span class="number">0</span>,</span><br><span class="line">	webkit: <span class="number">0</span>,</span><br><span class="line">          opera: <span class="number">0</span>,</span><br><span class="line">          ver: <span class="literal">null</span></span><br><span class="line">      &#125;;</span><br><span class="line">      <span class="keyword">var</span> ua = navigator.userAgent;</span><br><span class="line">      <span class="comment">//检测opera</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">window</span>.opera) &#123;</span><br><span class="line">          engine.ver = <span class="built_in">window</span>.opera.version();</span><br><span class="line">          engine.opera = <span class="built_in">parseFloat</span>(engine.ver);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">//检测webkit</span></span><br><span class="line">      <span class="keyword">else</span> <span class="keyword">if</span> (<span class="regexp">/AppleWebKit\/(\S+)/</span>.test(ua)) &#123;</span><br><span class="line">          alert(<span class="number">1</span>);</span><br><span class="line">          engine.ver = <span class="built_in">RegExp</span>[<span class="string">"$1"</span>];</span><br><span class="line">          engine.webkit = <span class="built_in">parseFloat</span>(engine.ver);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">//检测KHTML  </span></span><br><span class="line">      <span class="keyword">else</span> <span class="keyword">if</span> (<span class="regexp">/KHTML\/(\S+)/</span>.test(ua) || <span class="regexp">/Konqueror\/([^;]+)/</span>.test(ua)) &#123;</span><br><span class="line">          engine.ver = <span class="built_in">RegExp</span>[<span class="string">"$1"</span>];</span><br><span class="line">          engine.khtml = <span class="built_in">parseFloat</span>(engine.ver);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">//检测Gecko  </span></span><br><span class="line">      <span class="keyword">else</span> <span class="keyword">if</span> (<span class="regexp">/rv:([^\)]+)\) Gecko\/\d&#123;8&#125;/</span>.test(ua)) &#123;</span><br><span class="line">          engine.ver = <span class="built_in">RegExp</span>[<span class="string">"$1"</span>];</span><br><span class="line">          engine.gecko = <span class="built_in">parseFloat</span>(engine.ver);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">//检测IE</span></span><br><span class="line">      <span class="keyword">else</span> <span class="keyword">if</span> (<span class="regexp">/MSIE ([^;]+)/</span>.test(ua)) &#123;</span><br><span class="line">          engine.ver = <span class="built_in">RegExp</span>[<span class="string">"$1"</span>];</span><br><span class="line">          engine.ie = <span class="built_in">parseFloat</span>(engine.ver);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> &#123; engine: engine &#125;;</span><br><span class="line">  &#125; ();</span><br></pre></td></tr></table></figure></p>

          
        
      </div>
    

    
      <div class="post-footer">
        

        

        
        
          <div class="post-eof"></div>
        
      </div>
    
  </div>


  
    

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/2013/08/18/2013-09-16-ie6-hide/">
                IE6下的躲猫猫
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          
            发表于 2013-08-18
          
        </span>
        
          
        
      </div>
    </div>

    
      <div class="post-body">

        
        

        
          
            <h2 id="现象">现象</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&lt;head&gt;</span><br><span class="line">   <span class="xml"><span class="tag">&lt;<span class="title">title</span>&gt;</span>Untitled Page<span class="tag">&lt;/<span class="title">title</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="title">style</span> <span class="attribute">type</span>=<span class="value">"text/css"</span>&gt;</span><span class="css"></span><br><span class="line">       <span class="class">.container</span></span><br><span class="line">       <span class="rules">&#123;</span><br><span class="line">           <span class="rule"><span class="attribute">background-color</span>:<span class="value"><span class="hexcolor">#ccc</span></span></span>;</span><br><span class="line">           <span class="rule">&#125;</span></span></span><br><span class="line">         <span class="class">.left</span></span><br><span class="line">         <span class="rules">&#123;</span><br><span class="line">             <span class="rule"><span class="attribute">width</span>:<span class="value"><span class="number">100px</span></span></span>;</span><br><span class="line">             <span class="rule"><span class="attribute">height</span>:<span class="value"><span class="number">50px</span></span></span>;</span><br><span class="line">             <span class="rule"><span class="attribute">background-color</span>:<span class="value">Olive</span></span>;</span><br><span class="line">             <span class="rule"><span class="attribute">float</span>:<span class="value">left</span></span>;</span><br><span class="line">             <span class="rule">&#125;</span></span></span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">         <span class="class">.clear</span></span><br><span class="line">         <span class="rules">&#123;</span><br><span class="line">             <span class="rule"><span class="attribute">height</span>:<span class="value"><span class="number">40px</span></span></span>;</span><br><span class="line">             <span class="rule"><span class="attribute">clear</span>:<span class="value">both</span></span>;</span><br><span class="line">             <span class="rule"><span class="attribute">background-color</span>:<span class="value">Red</span></span>;</span><br><span class="line">             <span class="rule">&#125;</span></span></span><br><span class="line">   </span><span class="tag">&lt;/<span class="title">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"container"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"left"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span>&gt;</span></span><br><span class="line">        浮动元素后面的非浮动元素的显示问题：后面的元素认为浮动元素已脱离文档流；  其后面非浮动元素中的块级元素的背景和边框会被浮动元素盖住，</span><br><span class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span>&gt;</span></span><br><span class="line">        但块级元素其中的文本不会被浮动元素盖住；其后面非浮动元素中的行级元素的背景、边框和内容都不会被浮动元但在IE6下很奇快，不会盖住块级元</span><br><span class="line">   <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"clear"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p><img src="/images/hide1.PNG" alt="参数为DOM对象时jQuery对象内部结构">   </p>
<h2 id="解决方法：">解决方法：</h2><ol>
<li>给容器元素设置尺寸：<code>.container {_height:1%;}</code> 或<code>*html .container{height:1%;}</code> </li>
<li>去除容器元素背景色/背景图  </li>
</ol>

          
        
      </div>
    

    
      <div class="post-footer">
        
          <div class="post-tags">
            
              <a href="/tags/CSS/">
                #CSS
              </a>
            
          </div>
        

        

        
        
          <div class="post-eof"></div>
        
      </div>
    
  </div>


  
    

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/2013/06/02/2013-08-31-ajax3/">
                Ajax之jQuery对Ajax的封装（之那些被遗忘的参数）
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          
            发表于 2013-06-02
          
        </span>
        
          
        
      </div>
    </div>

    
      <div class="post-body">

        
        

        
          
            <p>  　　</p>
<h2 id="写在前面">　写在前面　　　　</h2><p>在项目开发过程中，在使用jQuery封装的Ajax时遇到过2个问题：  </p>
<ol>
<li>请求数据时，总是读浏览器缓存，即使服务器数据已发生变化  </li>
<li>有时候需要再Ajax回调函数中输出响应主体文本，类似于“操作成功”之类的，但有时候发现输出的居然是网页源代码，这个是session超时导致的。因为这个问题被测试部烦了好久好久好久。。。。这也是下定决心总结下封装Ajax的原因。<br>在下面的总结中将穿插提到这两个问题的原因及解决方法。  </li>
</ol>
<h2 id="丰富的接口">丰富的接口</h2><ul>
<li>底层封装：$.ajax()  </li>
<li>2层封装：$(selector).load()、$.get()、$.post()  </li>
<li>3层封装：$.getScript、$.getJSON()  </li>
</ul>
<h2 id="回调函数中容易被人忽视的参数">回调函数中容易被人忽视的参数</h2><p>关于封装的各个接口的具体使用不再赘述，这里重点讲下回调函数中的各参数。这部分在使用过程中很容易被忽略，大部分人很欢快地使用jquery实现了功能就不管了~</p>
<h3 id="$(selector)-load()">$(selector).load()</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"#FileApp"</span>).load(<span class="string">'./GetSubstanceInfo'</span>,</span><br><span class="line">                    &#123; <span class="string">'ExaAppId'</span>: ExaAppId &#125;,</span><br><span class="line">                    <span class="function"><span class="keyword">function</span> <span class="params">(responseData, textStatus, XHR)</span> </span>&#123;</span><br><span class="line">                        alert(<span class="keyword">this</span>.id);<span class="comment">//FileApp</span></span><br><span class="line">					<span class="comment">//在该回调函数中，this指向$(#FileApp);</span></span><br><span class="line">					<span class="comment">//responseData 返回的响应主体内容，与XHR.responseText是一致的</span></span><br><span class="line">					<span class="comment">//textStatus http状态：success、error、notmodified、timeout  </span></span><br><span class="line">					<span class="comment">//XHR即当前XMLHttpRequest对象</span></span><br><span class="line">                    &#125;</span><br><span class="line">    );</span><br></pre></td></tr></table></figure>
<p>需要说明，<strong>在load()方法中，无论请求是否成功，只要请求完成，都会触发回调函数</strong>，这样可以在回调函数中检查textStatus就可以知道响应的情况。我觉得最值得欢呼雀跃的是返回了XHR对象，根据XHR对象的各属性及方法就可以为所欲为了<del>~</del>~  </p>
<p>还记得我们上面提到的sesion超时导致ajax返回网页源代码的问题吧。一般情况下，当检测到session超时时，后台的常规处理是是网页跳转到指定页面（例如登录页）。对于ajax请求来说，这时就将指定页面源码当做XHR对象的响应内容返回，于是在回调函数里获取到的其实是指定页面的源码。<br>我的处理是，在后台超时处理时对请求类型进行判断，如果是ajax请求，则为XHR增加一个自定义头部信息，将其值设为<code>timeout</code>，在回调函数中根据XHR对象对这个头部信息进行判断，以做出相应处理。代码如下：  </p>
<pre><code class="javascript">C#部分  
public <span class="keyword">void</span> SetTimeOut()
    {
        string ajaxHeaser = Request.Headers[<span class="string">"x-requested-with"</span>];
        <span class="keyword">if</span> (ajaxHeaser != <span class="literal">null</span> &amp;&amp; ajaxHeaser.ToLower().Equals(<span class="string">"XMLHttpRequest"</span>, StringComparison.OrdinalIgnoreCase))
        {
            <span class="comment">//是ajax请求，添加自定义头部信息sessionstatus</span>
            Response.AppendHeader(<span class="string">"sessionstatus"</span>, <span class="string">"timeout"</span>);
        }
        <span class="keyword">else</span>
        {
            <span class="comment">//不是ajax请求，跳转到指定页面</span>
            Response.Redirect(<span class="string">"~/Home/Login"</span>);
        }

    }  

js部分
$(<span class="string">"#FileApp"</span>).load(<span class="string">'./GetSubstanceInfo'</span>,
                 { <span class="string">'ExaAppId'</span>: ExaAppId },
                 <span class="function"><span class="keyword">function</span> <span class="params">(response, textStatus, XHR)</span> </span>{
                    <span class="keyword">var</span> sessionStatus = XHR.getResponseHeader(<span class="string">"sessionstatus"</span>);
                      <span class="keyword">if</span> (sessionStatus == <span class="string">"timeout"</span>) {
                          <span class="comment">//.....</span>
                      } 
                      <span class="keyword">else</span> {
                          <span class="comment">//......</span>
                      }
                 }
 );
</code></pre>
<h3 id="$-get()">$.get()</h3><pre><code class="javascript">$.get(
        <span class="string">"./GetExamerByDepId"</span>,
        { <span class="string">"DepId"</span>: selected_dep_val },
        <span class="function"><span class="keyword">function</span> <span class="params">(responseData, textStatus, XHR)</span> </span>{
                <span class="comment">//this 该对象包含的是这次ajax请求的配置信息</span>
                <span class="comment">//responseData 响应主体的内容，与XHR.responseText是一致的</span>
                <span class="comment">//textStatus http状态：success、error、notmodified、timeout  </span>
                <span class="comment">//XHR即当前XMLHttpRequest对象</span>

        },
        <span class="string">"text"</span>
    );
</code></pre>
<p>在有些书上说$.get()的回调函数中只有两个参数responseData、textStatus。实际上，还有第三个参数XHR对象。  </p>
<p>在$.get()回调函数内部也有个<code>this</code>对象，其结构如下：<br><img src="/images/ajax1.PNG" alt="参数为DOM对象时jQuery对象内部结构">  </p>
<p>需要注意的是，$.get()中<strong>只有当数据成功返回才调用回调函数。</strong>    </p>
<p>与load()不同的是，$.get()可以返回的数据类型很丰富：xml、html、script、json、text、_default。</p>
<h3 id="$-post()">$.post()</h3><pre><code class="javascript">$.post(
        <span class="string">"./GetExamerByDepId"</span>,
        { <span class="string">"DepId"</span>: selected_dep_val },
        <span class="function"><span class="keyword">function</span> <span class="params">(responseData, textStatus, XHR)</span> </span>{
                <span class="comment">//this 该对象包含的是这次ajax请求的配置信息</span>
                <span class="comment">//responseData 响应主体的内容，与XHR.responseText是一致的</span>
                <span class="comment">//textStatus http状态：success、error、notmodified、timeout  </span>
                <span class="comment">//XHR即当前XMLHttpRequest对象</span>

        },
        <span class="string">"text"</span>
    );
</code></pre>
<p>如果不管post、get在实现上的区别，仅从jQuery封装的角度来看，$.get和$.post在使用上非常类似。<br>同样，其回调函数的参数也有XHR对象。其this对象的结构如下图所示：<br><img src="/images/ajax2.PNG" alt="参数为DOM对象时jQuery对象内部结构">  </p>
<h3 id="$-ajax()">$.ajax()</h3><pre><code class="javascript">$.ajax({
        url: <span class="string">"./CancelPublish"</span>,
        method: <span class="string">"post"</span>,
        cache:<span class="literal">false</span>,
        <span class="comment">//....</span>
        data: { <span class="string">"ExaAppId"</span>: val }, <span class="comment">//向后台传送审批ID  </span>
        beforeSend:<span class="function"><span class="keyword">function</span><span class="params">(XHR)</span></span>{
            <span class="comment">//this 该对象包含的是这次ajax请求的配置信息</span>
        },
        complete:<span class="function"><span class="keyword">function</span><span class="params">(XHR,textStatus)</span></span>{
            <span class="comment">//this 该对象包含的是这次ajax请求的配置信息</span>
        }
        success: <span class="function"><span class="keyword">function</span> <span class="params">(response, textStatus, XHR)</span> </span>{
            <span class="comment">//this 该对象包含的是这次ajax请求的配置信息</span>
        },
        error: <span class="function"><span class="keyword">function</span> <span class="params">(XHR,textStatus,errorThrown)</span> </span>{
            <span class="comment">//this 该对象包含的是这次ajax请求的配置信息</span>
        }
    });
</code></pre>
<p>在项目开发中，我最喜欢用$.ajax()。因为可控性比较大，比如，可以在<code>beforeSend</code>中修改请求头部信息。     </p>
<h3 id="特别说明">特别说明</h3><p>在上述接口中可以看到，不管是回调函数，还是$.ajax()中属性对于函数中都有一个this对象，这个对象包含的是这次ajax请求的配置信息。<br>另外，在load()中我讲到了session超时返回网页源代码的解决，这个不光在load()中适用，在其他几个接口中同样适用。  </p>
<h2 id="缓存问题">缓存问题</h2><p>关于开头提到的缓存问题，其原因是若已经请求过一次，当再次请求时若参数<code>{key1:value1,key2:value2}</code>未发生变化，则不再从后台请求数据，而是直接读取浏览器缓存。<br>解决办法很多，我这里说两个我项目中常用到的：  </p>
<ol>
<li>在<code>$.ajax(options)</code>中，<code>options</code>有个可选属性<code>cache</code>，设为<code>false</code>便不再从浏览器缓存中读数据。  </li>
<li>由于在<code>$.get()、$.post()、$(selector).load()</code>中没有<code>cache</code>属性，则在参数部分增加一个名值对，其值赋为随机数<code>{key1:value1,key2:value2...,random:Math.random()}</code>，这样每次发送的参数都是变化的则会直接请求后台而不是读取缓存。  </li>
</ol>

          
        
      </div>
    

    
      <div class="post-footer">
        

        

        
        
          <div class="post-eof"></div>
        
      </div>
    
  </div>


  
    

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/2013/06/01/2013-08-30-ajax2/">
                AJAX之头部信息
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          
            发表于 2013-06-01
          
        </span>
        
          
        
      </div>
    </div>

    
      <div class="post-body">

        
        

        
          
            <h2 id="头部信息">头部信息</h2><p>HTTP的头部信息包括主要请求头部信息和响应头部信息。在IE下可以使用HttpWatch看到每次请求的详细信息，包括请求方式、http响应的状态、耗时以及头部信息。如下图所示：   </p>
<p><img src="/images/httpwatch.PNG" alt="参数为DOM对象时jQuery对象内部结构">    </p>
<p>在Chorme下使用调试工具中的NetWork页可以查看这些信息，如下图所示：    </p>
<p><img src="/images/chromenetwork.PNG" alt="参数为DOM对象时jQuery对象内部结构"> </p>
<ul>
<li>设置请求头部信息（由浏览器发送给服务器）<br>  <code>setRequestHeader(para1,para2)</code>其中para1是头部信息字段，可以是自定义的；para2是要设置的值。  </li>
<li>获取响应头部信息（服务器发回给浏览器）<br>  <code>getResponseHeader(para)</code>其中para是头部信息字段。<br>  <code>getAllResponseHeaders()</code>获取所有头部信息，返回长字符串（多行文本）    </li>
</ul>
<h3 id="请求头部信息（由浏览器发送给服务器）：">请求头部信息（由浏览器发送给服务器）：</h3><ul>
<li>Accept：浏览器能够处理的文本类型，例如<code>application/xml,text/xml,*/*</code>  </li>
<li>Accept-Charset:浏览器能够显示的字符集  </li>
<li>Accept-Encoding：浏览器能够处理的压缩编码，例如<code>gzip,deflate</code>,  </li>
<li>Accept-Language：浏览器当前设置的语言，例如<code>zh-cn</code>  </li>
<li>Host：发出请求的页面所在域  </li>
<li>Cookie：当前页面设置的任何Cookie  </li>
<li>Referer：发出请求的页面的URI  </li>
<li>User-Agent:浏览器的用户代理字符串  </li>
</ul>
<h3 id="通用头部信息（请求和响应头部都可能包含）：">通用头部信息（请求和响应头部都可能包含）：</h3><ul>
<li>Cache-Control：缓存机制    </li>
<li>Connect：是否持久连接。值Close、Keep-Alive  </li>
<li>Date：消息发送的时间  </li>
</ul>
<h3 id="响应头部信息（由服务器发回给浏览器）">响应头部信息（由服务器发回给浏览器）</h3><ul>
<li>Server：服务器表明自己的版本等信息  </li>
</ul>
<h3 id="实体头部信息（与响应实体相关的信息）">实体头部信息（与响应实体相关的信息）</h3><ul>
<li>Content-Length：服务器告诉浏览器响应的实体的长度  </li>
<li>Content-Type：服务器告诉浏览器响应的实体对象的类型   </li>
<li>Etag:文件的标志值，当服务器上文件修改时，这个值也会改变。浏览器再次请求该文件时，会将Etag值发给服务器，服务器将这个值跟当前的Etag值对比，若未发生变化，则读取缓存304.  </li>
<li>Last-Modified：服务器认为文件最后修改时间  </li>
<li>Expires：服务器认为实体对象的过期时间  </li>
</ul>

          
        
      </div>
    

    
      <div class="post-footer">
        

        

        
        
          <div class="post-eof"></div>
        
      </div>
    
  </div>


  
    

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/2013/05/28/2013-08-28-vertical-and-center/">
                css居中
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          
            发表于 2013-05-28
          
        </span>
        
          
        
      </div>
    </div>

    
      <div class="post-body">

        
        

        
          
            <h2 id="居中">居中</h2><h3 id="水平居中_：">水平居中  ：</h3><ul>
<li><p>行内元素的水平居中：图片、文本等水平居中：<br>给其父元素设置<code>text-align:center;</code>    </p>
<pre><code class="css">      CSS:    
      .father{
           border:1px solid blue;
           width:200px;height:100x;
           text-align:center;}
      HTML:
      &lt;div class="father"&gt;
          &lt;span style=""&gt;居中文本&lt;/span&gt;
      &lt;/div&gt;  

  &lt;div style="border:1px solid blue;width:200px;height:100x;text-align:center;"&gt;  
&lt;span style=""&gt;居中文本&lt;/span&gt;
&lt;/div&gt;
</code></pre>
</li>
<li><p>确定宽度的块级元素的水平居中：<br>设置该块级元素<code>margin-left:auto;margin-right:auto;</code>    </p>
<pre><code class="css">    CSS:  
    .father{
            width:200px;
            height:100px;
            border:1px solid green;
        }
    .cur{
            width:100px;
            height:100px;
            margin:0 auto;
        }
    HTML:
    &lt;div class="father"&gt;
        &lt;div class="cur"&gt;块级水平居中    
        &lt;/div&gt;
    &lt;/div&gt;    

&lt;div class="father" style="width:200px;border:1px solid green;"&gt;
    &lt;div class="cur" style="width:100px;margin:0 auto;"&gt;块级水平居中    
    &lt;/div&gt;
&lt;/div&gt;
</code></pre>
</li>
<li><p>不确定宽度的块级元素的水平居中：      </p>
<ul>
<li><p>方法一：将该块级元素设置<code>display:inline-block;</code>，再对其父元素设置<code>text-align:center;</code>  </p>
<pre><code>CSS:  
.father{
        width:<span class="number">200</span>px;
        border:<span class="number">1</span>px solid green;
        <span class="type">text</span>-align:center;
    }
.cur{
        display:inline;
    }
HTML:
&lt;<span class="keyword">div</span> <span class="type">class</span>=<span class="string">"father"</span>&gt;
    &lt;<span class="keyword">div</span> <span class="type">class</span>=<span class="string">"cur"</span>&gt;块级水平居中    
    &lt;/<span class="keyword">div</span>&gt;
&lt;/<span class="keyword">div</span>&gt;        
</code></pre>  <div class="father" style="width:200px;border:1px solid green;text-align:center;"><br>      <div class="cur" style="display:inline;">块级水平居中<br>      </div><br>  </div>    </li>
<li>方法二：借助table布局。<br>将需要居中的元素写在table里，然后对table设置<code>margin-left:auto;margin-right:auto;</code>。    </li>
<li><p>方法三：设置<code>position、left</code>正负抵消，达到居中水平效果。  </p>
<pre><code>CSS<span class="value">:      
/*father设置relative是为了helpdiv移动时以father为参照*/
.father{width:<span class="number">200px</span>;</span><span class="attribute">height</span><span class="value">:<span class="number">200px</span>;</span><span class="attribute">border</span><span class="value">:<span class="number">1px</span> solid blue;</span><span class="attribute">position</span><span class="value">:relative;</span>}
<span class="comment">/*helpdiv相对于fahter向右移动father宽度的50%；*/</span>
<span class="class">.helpdiv</span>{<span class="attribute">position</span><span class="value">:absolute;</span><span class="attribute">left</span><span class="value">:<span class="number">50%</span>;</span><span class="attribute">border</span><span class="value">:<span class="number">1px</span> solid red;</span>}
<span class="comment">/*cur相对于cur自身，向左侧移动helpdiv的50%；因此最好不要设置helpdiv的宽度*/</span>
<span class="class">.cur</span>{<span class="attribute">position</span><span class="value">:relative;</span><span class="attribute">left</span><span class="value">:-<span class="number">50%</span>;</span>}
<span class="tag">HTML</span><span class="value">:
&lt;div class=<span class="string">"father"</span>&gt;
    &lt;div class=<span class="string">"helpdiv"</span>&gt;
           &lt;div class=<span class="string">"cur"</span>&gt;<span class="number">123456</span>&lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;   </span>
</code></pre><p>  <div class="father" style="width:200px;height:200px;border:1px solid blue;position:relative;"></div></p>
<pre><code>    &lt;<span class="keyword">div</span> <span class="type">class</span>=<span class="string">"helpdiv"</span> style=<span class="string">"position:absolute;left:50%;border:1px solid red;"</span>&gt;
           &lt;<span class="keyword">div</span> <span class="type">class</span>=<span class="string">"cur"</span> style=<span class="string">"position:relative;left:-50%;"</span>&gt;<span class="number">123456</span>&lt;/<span class="keyword">div</span>&gt;
    &lt;/<span class="keyword">div</span>&gt;
&lt;/<span class="keyword">div</span>&gt;
</code></pre><h3 id="竖直居中：">竖直居中：</h3></li>
</ul>
</li>
<li><p>父元素高度不确定的文本、图片、块级元素的竖直居中：<br>给父元素设置相同的上下内边距(<strong>父高度确定时如此设置将不能实现竖直居中</strong>)      </p>
<pre><code>&lt;<span class="keyword">div</span> style=<span class="string">"border:1px solid blue;width:200px;padding:10px 20px;"</span>&gt;
    &lt;<span class="keyword">div</span> style=<span class="string">"height:50px;background-color:red;"</span>&gt;&lt;/<span class="keyword">div</span>&gt;
&lt;/<span class="keyword">div</span>&gt;  
</code></pre>  <div style="border:1px solid blue;width:200px;padding:10px 20px;"><br>  <div style="height:50px;background-color:red;"></div></div>  
</li>
<li><p>父元素高度确定的单行文本的竖直居中：<br>给父元素设置<code>line-height</code>值与<code>height</code>值相同      </p>
<pre><code><span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"border:1px solid blue;width:200px;height:100px;line-height:100px;"</span>&gt;</span>
    <span class="tag">&lt;<span class="title">span</span> <span class="attribute">style</span>=<span class="value">"background-color:red;"</span>&gt;</span>单行文本<span class="tag">&lt;/<span class="title">span</span>&gt;</span>
<span class="tag">&lt;/<span class="title">div</span>&gt;</span>  
</code></pre>  <div style="border:1px solid blue;width:200px;height:100px;line-height:100px;"><br>  <span style="background-color:red;">单行文本</span></div>  </li>
<li><p>父高度确定的多行文本、图片、块级元素的竖直居中：  </p>
<ul>
<li>借助于table布局，将内容包含在td（th）中，在对td（th）设置<code>vertical-align:middle;</code>，这是由于<code>vertical-align</code>只对td、th才生效。  </li>
<li><p>hack：在IE8+以及非IE浏览器下，可以对父设置<code>display:table-cell</code>将其<code>vertical-align</code>激活，从而通过设置<code>vertical-align:middle</code>使子元素竖直居中。但在IE6、7下无效，在IE6、7下设置<code>postion、top</code>进行浮动抵消实现竖直居中。  </p>
<pre><code>CSS<span class="value">:
.wrap{background-color:Black;</span> 
      <span class="attribute">width</span><span class="value">:<span class="number">500px</span>;</span>
      <span class="attribute">color</span><span class="value">:<span class="hexcolor">#fff</span>;</span>
      <span class="attribute">height</span><span class="value">:<span class="number">100px</span>;</span>
      <span class="attribute">display</span><span class="value">:table-cell;</span>
      <span class="attribute">vertical-align</span><span class="value">:middle;</span>
      *<span class="attribute">position</span><span class="value">:relative;</span>
      }
 <span class="class">.verticalWrap</span>
 {
     <span class="attribute">border</span><span class="value">:<span class="number">1px</span> solid red;</span>
     *<span class="attribute">position</span><span class="value">:absolute;</span>
     *<span class="attribute">top</span><span class="value">:<span class="number">50%</span>;</span>
     }
  <span class="class">.vertical</span>

  {
      *<span class="attribute">position</span><span class="value">:relative;</span>
      *<span class="attribute">top</span><span class="value">:-<span class="number">50%</span>;</span>              
      }  
<span class="tag">HTML</span><span class="value">:  
&lt;div class=<span class="string">"father"</span>&gt;
    &lt;div class=<span class="string">"helpdiv"</span>&gt;
           &lt;div class=<span class="string">"cur"</span>&gt;<span class="number">123</span>&lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;</span>
</code></pre></li>
</ul>
</li>
</ul>

          
        
      </div>
    

    
      <div class="post-footer">
        

        

        
        
          <div class="post-eof"></div>
        
      </div>
    
  </div>


  

          </div>

          
            <div class="pagination">
              <a class="extend prev" rel="prev" href="/page/2/">&laquo;</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span>
            </div>
          
        </div>

        
<div class="sidebar-toggle">
  <div class="sidebar-toggle-line-wrap">
    <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
    <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
    <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
  </div>
</div>

<div id="sidebar" class="sidebar">
  <div class="sidebar-inner">

    

    <div class="site-overview">
      <div class="site-author motion-element">
        <img class="site-author-image" src="/images/default_avatar.jpg" alt="John Doe" />
        <p class="site-author-name">John Doe</p>
      </div>
      <p class="site-description motion-element"></p>
      <div class="site-state motion-element">
        <div class="site-state-item site-state-posts">
          <span class="site-state-item-count">30</span>
          <span class="site-state-item-name">日志</span>
        </div>
        <div class="site-state-item site-state-tags">
            <span class="site-state-item-count">5</span>
            <span class="site-state-item-name">标签</span>
        </div>
        <div class="site-state-item site-state-pages">
            <span class="site-state-item-count">1</span>
            <span class="site-state-item-name">页面</span>
        </div>
      </div>

      

      <div class="social-info motion-element">
        
      </div>

      
      

    </div>

    

  </div>
</div>


      </div>
    </div>

    <div id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy; &nbsp; 
  2015
  <span class="with-love">
    <i class="icon-heart"></i>
  </span>
  <span class="author">John Doe</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 - <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">NexT</a>
</div>



      </div>
    </div>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript">
    $(document).ready(function() {
      $(".fancybox").fancybox();
    });
  </script>

  <script type="text/javascript">
  function hasMobileUA () {
    var nav = window.navigator;
    var ua = nav.userAgent;
    var pa = /iPad|iPhone|Android|Opera Mini|BlackBerry|webOS|UCWEB|Blazer|PSP|IEMobile|Symbian/g;

    return pa.test(ua);
  }

  function isDesktop () {
    return screen.width > 991 && !hasMobileUA();
  }

  function isTablet () {
    return screen.width < 992 && screen.width > 767 && hasMobileUA();
  }

  function isMobile () {
    return screen.width < 767 && hasMobileUA();
  }

  function escapeSelector (selector) {
    return selector.replace(/[!"$%&'()*+,.\/:;<=>?@[\\\]^`{|}~]/g, "\\$&")
  }
</script>

  

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  
  <script type="text/javascript" id="motion.page.home">
    $(document).ready(function () {
      $.Velocity.RunSequence([
        { e: $('.brand'), p: { opacity: 1 }, o: { duration: 100 } },
        { e: $('.logo'), p: { opacity: 1, top: 0 }, o: { duration: 50} },
        { e: $('.site-title'), p: { opacity: 1, top: 0 }, o: { duration: 200, sequenceQueue: false } }
      ]);
      $('.menu-item').velocity('transition.slideDownIn', {display: null});
    });
  </script>


  <script type="text/javascript" id="motion.global">
  $(document).ready(function () {
    var body = $('body');
    var isSidebarVisible = false;
    var sidebarToggle = $('.sidebar-toggle');
    var sidebarToggleLine1st = $('.sidebar-toggle-line-first')
    var sidebarToggleLine2nd = $('.sidebar-toggle-line-middle');
    var sidebarToggleLine3rd = $('.sidebar-toggle-line-last');
    var sidebar = $('.sidebar');

    var SIDEBAR_WIDTH = '320px';
    var SIDEBAR_DISPLAY_DURATION = 300;

    var sidebarToogleLineStatusInit = {width: '100%', opacity: 1, left: 0, rotateZ: 0, top: 0};

    var sidebarToggleLine1stStatusInit = sidebarToogleLineStatusInit;
    var sidebarToggleLine1stStatusArrow = {width: '50%', rotateZ: '-45deg', top: '2px'};
    var sidebarToogleLine1stStatusClose = {width: '100%', rotateZ: '-45deg', top: '5px'};

    var sidebarToggleLine2ndStatusInit = sidebarToogleLineStatusInit;
    var sidebarToggleLine2ndStatusArrow = {width: '90%'};
    var sidebarToogleLine2ndStatusClose = {opacity: 0};

    var sidebarToggleLine3rdStatusInit = sidebarToogleLineStatusInit;
    var sidebarToggleLine3rdStatusArrow = {width: '50%', rotateZ: '45deg', top: '-2px'};
    var sidebarToogleLine3rdStatusClose = {width: '100%', rotateZ: '45deg', top: '-5px'};

    sidebatToggleMotion();
    postsListMotion();
    backToTopMotion();


    $(document)
      .on('sidebar.isShowing', function () {
        isDesktop() && body.velocity(
          {paddingRight: SIDEBAR_WIDTH},
          SIDEBAR_DISPLAY_DURATION
        );
        sidebarContentMotion();
      })
      .on('sidebar.isHiding', function () {});


    function backToTopMotion () {
      var b2top = $('.back-to-top');
      b2top.on('click', function () {
        body.velocity('scroll');
      });
    }

    function sidebarShowMotion () {

      sidebarToggleLine1st.velocity(sidebarToogleLine1stStatusClose);
      sidebarToggleLine2nd.velocity(sidebarToogleLine2ndStatusClose);
      sidebarToggleLine3rd.velocity(sidebarToogleLine3rdStatusClose);

      sidebar.velocity({width: SIDEBAR_WIDTH}, {
        display: 'block',
        duration: SIDEBAR_DISPLAY_DURATION,
        complete: function () {
          sidebar.addClass('sidebar-active');
          sidebar.trigger('sidebar.didShow');
        }
      });
      sidebar.trigger('sidebar.isShowing');
    }

    function sidebarHideMotion () {
      isDesktop() && body.velocity({paddingRight: 0});
      sidebar.velocity('reverse');

      sidebarToggleLine1st.velocity(sidebarToggleLine1stStatusInit);
      sidebarToggleLine2nd.velocity(sidebarToggleLine2ndStatusInit);
      sidebarToggleLine3rd.velocity(sidebarToggleLine3rdStatusInit);

      sidebar.removeClass('sidebar-active');
      sidebar.trigger('sidebar.isHiding');
    };

    function sidebarContentMotion () {
      $('.sidebar .motion-element').velocity(
        'transition.slideRightIn',
        {stagger: 50, drag: true}
      );
    }

    function postsListMotion () {
      var postMotionOptions = postMotionOptions || {stagger: 300, drag: true};
      $('.post').velocity('transition.slideDownIn', postMotionOptions);
    }

    function sidebatToggleMotion () {
      sidebarToggle.on('click', function () {
        isSidebarVisible ? sidebarHideMotion() : sidebarShowMotion();
        isSidebarVisible = !isSidebarVisible;
      });

      sidebarToggle.hover(function () {
        if (isSidebarVisible) {return}
        sidebarToggleLine1st.velocity('stop').velocity(sidebarToggleLine1stStatusArrow);
        sidebarToggleLine2nd.velocity('stop').velocity(sidebarToggleLine2ndStatusArrow);
        sidebarToggleLine3rd.velocity('stop').velocity(sidebarToggleLine3rdStatusArrow);
      }, function () {
        if (isSidebarVisible) {return}
        sidebarToggleLine1st.velocity('stop').velocity(sidebarToggleLine1stStatusInit);
        sidebarToggleLine2nd.velocity('stop').velocity(sidebarToggleLine2ndStatusInit);
        sidebarToggleLine3rd.velocity('stop').velocity(sidebarToggleLine3rdStatusInit);
      });
    }
  });

</script>





  

  

  
  

  


  
</body>
</html>
